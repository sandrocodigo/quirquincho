<body class="bg-gray-100 dark:bg-slate-900 dark:text-white h-screen">
  <div class="flex h-full">

    <button (click)="toggleMenu()"
      class="fixed top-5 right-5 z-50 p-2 bg-blue-500 text-white rounded-full shadow-lg md:hidden">
      <span class="material-icons">{{menuOpen?'close':'menu'}}</span>
    </button>

    <nav [ngClass]="{'hidden': !menuOpen, 'block': menuOpen, 'md:block': true}"
            class="w-20 bg-white dark:bg-slate-950 dark:border-gray-700 border-r border-gray-200 
            md:relative md:translate-x-0 transform transition-transform duration-300 ease-in-out z-50 md:z-auto h-full">

      <div class="flex flex-col items-center mt-10 space-y-4">

        @if (usuario) {
          <button type="button" [matMenuTriggerFor]="menu"
            class="flex text-sm bg-gray-800 rounded-full focus:ring-4 focus:ring-gray-300 dark:focus:ring-gray-600">
            <span class="sr-only">Open user menu</span>
            <img class="w-8 h-8 rounded-full" [src]="foto"
              [alt]="usuario.displayName ? usuario.displayName : 'Avatar'">
          </button>
        }

        <!-- [routerLinkActiveOptions]="{ exact: true }" -->
        @for (item of menuItems; track item) {
          <a [routerLink]="item.link" routerLinkActive="active"
            class="flex flex-col items-center justify-center w-full h-14 hover:text-blue-500 dark:text-cyan-300 "
            [ngClass]="item.color">
            <span class="material-icons">{{ item.icon }}</span>
            <span class="text-xs mt-1">{{ item.label }}</span>
          </a>
        }

        <!--
        <a [routerLink]="'/'"
          class="flex flex-col items-center justify-center w-full h-16 text-red-800 hover:text-blue-500 dark:text-lime-100">
          <span class="material-icons">sunny</span>
          <span class="text-xs mt-1">Inicio</span>
        </a>

        <a [routerLink]="'/viajes'"
          class="flex flex-col items-center justify-center w-full h-16 text-red-700 hover:text-blue-500 dark:text-lime-200">
          <span class="material-icons">car_rental</span>
          <span class="text-xs mt-1">Viajes</span>
        </a>

        <a [routerLink]="'/contacto'"
          class="flex flex-col items-center justify-center w-full h-16 text-red-600 hover:text-blue-500 dark:text-lime-500">
          <span class="material-icons">phone</span>
          <span class="text-xs mt-1">Contacto</span>
        </a>
        -->
        
        <div class="mt-10">
          <mat-slide-toggle [(ngModel)]="darkMode" (change)="toggleDarkMode($event)"></mat-slide-toggle>
        </div>
      </div>
    </nav>

    <main class="flex-1 p-5 md:ml-0 h-full overflow-auto">
      <router-outlet></router-outlet>
    </main>

  </div>

  <mat-menu #menu="matMenu">
    @if (usuario) {
      <button mat-menu-item>
        <mat-icon>person</mat-icon>
        <span>{{usuario.email}}</span>
      </button>
    }

    @if (usuario && usuarioDatos && usuarioDatos.adminTipo=='administrador') {
      <button mat-menu-item [routerLink]="'administracion'">
        <mat-icon>computer</mat-icon>
        <span>App Administracion</span>
      </button>
    }

    <button mat-menu-item (click)="salir()">
      <mat-icon>logout</mat-icon>
      <span>Salir</span>
    </button>
  </mat-menu>

</body>

