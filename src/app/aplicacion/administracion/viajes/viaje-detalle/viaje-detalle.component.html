@if (viaje) {
  <div class="max-w-4xl mx-auto mt-2 bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6">
    <div class="flex items-center justify-between py-4">
      <h1 class="text-3xl font-semibold dark:text-white">
        Detalle del Viaje - {{viaje.codigo}}
      </h1>
      @if (!viaje.finalizado) {
        <button (click)="editar()" class="ml-1 mr-1" color="warn" mat-mini-fab
          matTooltip="Adicionar" type="button">
          <mat-icon>edit</mat-icon>
        </button>
      }
      <!--         <button *ngIf="!viaje.finalizado" (click)="enviarWat()" class="ml-1 mr-1" color="warn" mat-mini-fab
      matTooltip="Adicionar" type="button">
      <mat-icon>add</mat-icon>
    </button> -->
  </div>
  <div class="flex flex-wrap -mx-2">
    <div class="w-full md:w-1/2 px-2">
      <!-- Empresa -->
      <div class="flex items-center space-x-2">
        <span class="material-icons text-green-500">business</span>
        <h4 class="font-semibold text-sm text-gray-700 dark:text-gray-300">Empresa:</h4>
        <p class="text-gray-800 dark:text-gray-100">{{ viaje.clienteEmpresa }}</p>
      </div>
      <!-- Responsable -->
      <div class="flex items-center space-x-2">
        <span class="material-icons text-blue-500">person</span>
        <h4 class="font-semibold text-sm text-gray-700 dark:text-gray-300">Responsable:</h4>
        <p class="text-gray-800 dark:text-gray-100">{{ viaje.clienteResponsable }}</p>
      </div>
      <!-- Teléfono -->
      <div class="flex items-center space-x-2">
        <span class="material-icons text-yellow-500">phone</span>
        <h4 class="font-semibold text-sm text-gray-700 dark:text-gray-300">Teléfono:</h4>
        <p class="text-gray-800 dark:text-gray-100">{{ viaje.clienteTelefono }}</p>
      </div>
    </div>
    <div class="w-full md:w-1/2 px-2">
      <!-- Vehículo -->
      <div class="flex items-center space-x-2">
        <span class="material-icons text-indigo-500">directions_car</span>
        <h4 class="font-semibold text-sm text-gray-700 dark:text-gray-300">Vehículo:</h4>
        <p class="text-gray-800 dark:text-gray-100">{{ viaje.vehiculoModelo }} ({{ viaje.vehiculoPlaca }})
        </p>
      </div>
      <!-- Conductor -->
      <div class="flex items-center space-x-2">
        <span class="material-icons text-teal-500">badge</span>
        <h4 class="font-semibold text-sm text-gray-700 dark:text-gray-300">Conductor:</h4>
        <p class="text-gray-800 dark:text-gray-100">{{ viaje.conductor }}</p>
      </div>
      <!-- telefono -->
      <div class="flex items-center space-x-2">
        <span class="material-icons text-teal-500">phone</span>
        <h4 class="font-semibold text-sm text-gray-700 dark:text-gray-300">Telefono:</h4>
        <p class="text-gray-800 dark:text-gray-100">{{ viaje.conductorTelefono }}</p>
      </div>
      <!-- Email -->
      <div class="flex items-center space-x-2">
        <span class="material-icons text-teal-500">email</span>
        <h4 class="font-semibold text-sm text-gray-700 dark:text-gray-300">Email:</h4>
        <p class="text-gray-800 dark:text-gray-100">{{ viaje.conductorEmail }}</p>
      </div>
    </div>
  </div>
  <div class="flex flex-wrap -mx-2">
    <div class="w-full md:w-1/2 px-2">
    </div>
    <div class="w-full md:w-1/2 px-2">
    </div>
  </div>
  <div class="border-t border-gray-300 my-5"></div>
  <div class="flex flex-wrap -mx-2">
    <div class="w-full md:w-1/2 px-2">
      <!-- Origen -->
      <div class="flex items-center space-x-2">
        <span class="material-icons text-red-500">location_on</span>
        <h4 class="font-semibold text-sm text-gray-700 dark:text-gray-300">Origen:</h4>
        <p class="text-gray-800 dark:text-gray-100">{{ viaje.origen }}</p>
      </div>
      <!-- Destino -->
      <div class="flex items-center space-x-2">
        <span class="material-icons text-purple-500">flag</span>
        <h4 class="font-semibold text-sm text-gray-700 dark:text-gray-300">Destino:</h4>
        <p class="text-gray-800 dark:text-gray-100">{{ viaje.destino }}</p>
      </div>
      <!-- Precio -->
      <div class="flex items-center space-x-2">
        <span class="material-icons text-pink-500">attach_money</span>
        <h4 class="font-semibold text-sm text-gray-700 dark:text-gray-300">Precio:</h4>
        <p class="text-gray-800 dark:text-gray-100">Bs. {{ viaje.precio }}</p>
      </div>
    </div>
    <div class="w-full md:w-1/2 px-2">
      <div class="flex">
        <div class="w-1/2 px-2">
          <!-- Fecha -->
          <div class="flex items-center space-x-2">
            <span class="material-icons text-cyan-500">event</span>
            <h4 class="font-semibold text-sm text-gray-700 dark:text-gray-300">Fecha:</h4>
            <p class="text-gray-800 dark:text-gray-100">{{ viaje.fecha }}</p>
          </div>
        </div>
        <div class="w-1/2 px-2">
          <!-- Hora -->
          <div class="flex items-center space-x-2">
            <span class="material-icons text-orange-500">schedule</span>
            <h4 class="font-semibold text-sm text-gray-700 dark:text-gray-300">Hora:</h4>
            <p class="text-gray-800 dark:text-gray-100">{{ viaje.hora }}</p>
          </div>
        </div>
      </div>
      <br>
        <!--             <button *ngIf="!viaje.aceptado"
        class="px-6 py-2 bg-blue-500 text-white font-medium rounded-lg shadow hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:ring-offset-2"
        (click)="enviarPorWhatsApp(viaje)">
        Aceptar Viaje
      </button> -->
      <!--             <a (click)="enviarPorWhatsApp(viaje)"
      class="inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-full shadow-lg text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition ease-in-out duration-300">
      <span class="material-icons h-6 w-6 mr-2">phone</span>
      WhatsApp Web
    </a>
    <a (click)="enviarWat(viaje)"
      class="inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-full shadow-lg text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition ease-in-out duration-300">
      <span class="material-icons h-6 w-6 mr-2">phone</span>
      WhatsApp API
    </a> -->
    <!--             <a (click)="enviarConfirmacion(viaje)"
    class="inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-full shadow-lg text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition ease-in-out duration-300">
    <span class="material-icons h-6 w-6 mr-2">send</span>
    WhatsApp API Botones
  </a>
  <a (click)="testWebhook()"
    class="inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-full shadow-lg text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition ease-in-out duration-300">
    <span class="material-icons h-6 w-6 mr-2">update</span>
    probar webhock
  </a>
  <a (click)="addPersona()"
    class="inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-full shadow-lg text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition ease-in-out duration-300">
    <span class="material-icons h-6 w-6 mr-2">add</span>
    Add Persona
  </a>
  -->
</div>
</div>
<div class="text-center">
  <a (click)="whatsapp()"
    class="inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-full shadow-lg text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition ease-in-out duration-300">
    <span class="material-icons h-6 w-6 mr-2">phone</span>
    WhatsApp
  </a>
</div>
<div class="border-t border-gray-300 my-5"></div>
<!-- Descripción -->
<div class="mt-6">
  <h4 class="font-semibold text-gray-700 dark:text-gray-300">Nota:</h4>
  <p class="text-gray-800 dark:text-gray-100">{{ viaje.descripcion }}</p>
</div>
<div class="mt-6">
  <div class="flex flex-wrap -mx-2">
    <div class="w-full md:w-1/3 px-2">
      <span [class.bg-yellow-500]="viaje.rechazado" [class.bg-red-500]="!viaje.rechazado"
        class="px-2 inline-flex text-xs leading-5 rounded-full text-white">
        {{ viaje.rechazado?'Rechazado, cambiar Conductor':''}}
      </span>
      <br>
        <span class="italic text-xs text-gray-600 dark:text-gray-300">
          {{viaje.rechazadoFecha?.toDate() | date:'short'}}
        </span>
        <br>
          <span class="italic text-xs text-gray-600 dark:text-gray-300">
            {{viaje.rechazadoDireccion}}
          </span>
        </div>
        <div class="w-full md:w-1/3 px-2">
          <span class="italic text-xs text-gray-600 dark:text-gray-300">
            Aceptado
          </span>
          <span [class.bg-blue-500]="viaje.aceptado" [class.bg-red-500]="!viaje.aceptado"
            class="px-2 inline-flex text-xs leading-5 rounded-full text-white">
            {{ viaje.aceptado?'Aceptado':'Pendiente'}}
          </span>
          <br>
            <span class="italic text-xs text-gray-600 dark:text-gray-300">
              {{viaje.aceptadoFecha?.toDate() | date:'short'}}
            </span>
            <br>
              <span class="italic text-xs text-gray-600 dark:text-gray-300">
                {{viaje.aceptadoDireccion}}
              </span>
            </div>
            <div class="w-full md:w-1/3 px-2">
              <span class="italic text-xs text-gray-600 dark:text-gray-300">
                Finalizado
              </span>
              <span [class.bg-green-500]="viaje.finalizado" [class.bg-red-500]="!viaje.finalizado"
                class="px-2 inline-flex text-xs leading-5 rounded-full text-white">
                {{ viaje.finalizado?'Finalizado':'Pendiente'}}
              </span>
              <br>
                <span class="italic text-xs text-gray-600 dark:text-gray-300">
                  {{viaje.finalizadoFecha?.toDate() | date:'short'}}
                </span>
                <br>
                  <span class="italic text-xs text-gray-600 dark:text-gray-300">
                    {{viaje.finalizadoDireccion}}
                  </span>
                </div>
              </div>
            </div>
            <!-- Botón Aceptar Viaje -->
            <div class="mt-6 text-center">
              @if (!viaje.aceptado) {
                <button
                  class="px-6 py-2 bg-blue-500 text-white font-medium rounded-lg shadow hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:ring-offset-2"
                  (click)="aceptarViaje()">
                  Aceptar Viaje
                </button>
              }
            </div>
            <!-- Botón Aceptar Viaje -->
            <div class="mt-6 text-center">
              @if (viaje.aceptado && !viaje.finalizado) {
                <button
                  class="px-6 py-2 bg-green-500 text-white font-medium rounded-lg shadow hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-400 focus:ring-offset-2"
                  (click)="finalizarViaje()">
                  Finalizar Viaje
                </button>
              }
            </div>
          </div>
        }